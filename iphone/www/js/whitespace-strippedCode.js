var jQT=new $.jQTouch({icon:"images/icon.png",startupScreen:"images/splash.png",addGlossToIcon:false,statusBar:"default"}),skunk=2,INIT_GRAVITY=0.15,GRAVITY_CHANGE=0.0010,usingSimulator=false,ball,ballInitialTop=260,ballInitialLeft=280,ballHeight,ballX,ballY,answerY,highScaffold=2,lowScaffold=4,isScaffolded=false,topBaseboard,bboffset=10,bbcolors=["black","blue","green","purple"],error=4,closeEnoughError=15,horizontalChange=0,gamePaused=false,isSoundOn=true,vibrateTime=600,gameIsOver=true,numBeginnerProblems=
5,numBeginnerProblemsLeft=numBeginnerProblems,currentLevel=1,highestLevel=8,currentLevelType="fraction",highestDenominator=[0,4,8,12,20,4,8,12,20],problemsFinishedThisLevel=0,numProblemsPerLevel=15,currentTry=1,maxTries=4,playerScore=0,baseboardMin=0,baseboardMax=1,baseboardMaxPotential=2,streakCounter=0,fractionProblems=[],currentProblem,multiplicationProblems=[],highestMultiplier=10,presidentialProblems=[],presidentialNames=["Roosevelt","Eisenhower","Kennedy","Nixon","Clinton","Obama"],presidentialYearsElected=
[1932,1952,1960,1968,1992,2008],wrongAnswerSounds=[],closeEnoughSounds=[],bullseyeSounds=[],nextLevelSounds=[],multiplicationLevelSound,presidentialLevelSound,gameOverSound,dunkGForce=1.5,accelerometerFrequency=60,isDunking=false,dunkWait=false,preDunkGravity,dunkGravityChange=50,isSecretOn=false,secretWaiting=false,secretThreshold=0.9,secretVal=0;
$(function(){typeof PhoneGap!="undefined"&&$("body > *").css("minHeight","480px !important");document.addEventListener("touchmove",function(a){a.preventDefault()},false);$(document).ready(pageIsLoaded)});function pageIsLoaded(){$("#game-screen").bind("pageAnimationEnd",gameScreenHasAppeared);$("#settings form").submit(saveSettings);$("#settings").bind("pageAnimationStart",loadSettingsScreen)}
function gameScreenHasAppeared(a,b){if(b.direction!="out"){loadSettingsForGame();topBaseboard=parseInt($(".baseboardclass").css("margin-top"));setLevelBackgroundImage(1);setBaseboardLimits(0);currentProblem=new ProblemObject(1,2);initializeGameSounds();initialGameMessages();setTimeout("addBall();",4E3);firstTimeGame=true}}
function loadSettingsForGame(){if(localStorage.gravity!=null)INIT_GRAVITY=parseFloat(localStorage.gravity);if(localStorage.skunk!=null)skunk=localStorage.skunk;localStorage.gravityChange!=null&&setGravityChange(localStorage.gravityChange);if(localStorage.sound!=null)isSoundOn=localStorage.sound=="true"}
function loadSettingsScreen(){if(localStorage.gravity==null)localStorage.gravity=INIT_GRAVITY;$("#gravity").val([localStorage.gravity]);if(localStorage.skunk==null)localStorage.skunk=skunk;$("#skunk").val([localStorage.skunk]);if(localStorage.gravityChange==null)localStorage.gravityChange="g-static";$("#gravity-change").val([localStorage.gravityChange]);if(localStorage.sound==null)localStorage.sound=isSoundOn;else isSoundOn=localStorage.sound=="true";isSoundOn&&$("#sound").val(["soundOn"])}
function saveSettings(){isSoundOn=$("#sound").is(":checked");localStorage.sound=isSoundOn;var a=$("#skunk").val();skunk=parseInt(a);localStorage.skunk=skunk;INIT_GRAVITY=parseFloat($("#gravity").val());localStorage.gravity=INIT_GRAVITY;a=$("#gravity-change").val();setGravityChange(a);localStorage.gravityChange=a;jQT.goBack();return false}
function setGravityChange(a){switch(a){case "g-static":GRAVITY_CHANGE=0;break;case "g-min":GRAVITY_CHANGE=0.01;break;case "g-max":GRAVITY_CHANGE=0.02;break;default:alert("default grav change??? shouldn't happen")}}var accelerometerStarted=false;
function startWatchingForShaking(){try{var a=function(f){accelerometerFired(f)},b=function(){},c={};c.frequency=accelerometerFrequency;if(!accelerometerStarted){navigator.accelerometer.watchAcceleration(a,b,c);accelerometerStarted=true}}catch(d){usingSimulator=true}}
function accelerometerFired(a){if(horizontalChange>0&&a.x<0||horizontalChange<0&&a.x>0)horizontalChange=a.x;else if(dunkGForce<Math.abs(a.z)&&!isDunking&&!dunkWait){_gravity*=dunkGravityChange;dunkWait=isDunking=true}else if(secretThreshold<a.z){isSecretOn=true;secretVal=a.z}else isSecretOn=false;horizontalChange+=a.x*4}function initBaseBoard(){this.offset=10}
function animationLoop(){if(gameIsOver)alert("Please restart the game.\nYou have found 1/4 of the bugs in our game :P");else{var a=getTopForTime();if(a>=_yInitial){a=_yInitial;_oldTime=_newTime;if(isDunking){isDunking=false;changeGravity(INIT_GRAVITY);setTimeout("dunkWait = false;",500)}}$(ball).css("top",a);var b=parseInt(ball.css("left"))+horizontalChange;if(b<0){b*=-1;horizontalChange*=-1}else if(b>280){b-=b-280;horizontalChange*=-1}$(ball).css("left",b);if(a+ballHeight>=topBaseboard){setObjectXY(ball);
checkAnswer(ballX,ballY,answerY,ball)}}}
function checkAnswer(a,b,c,d){if(b>c-closeEnoughError&&b<c+closeEnoughError){a=currentProblem.denominator;d=currentProblem;if(b>c-error&&b<c+error){displayAnswerBoardDeadOn(answerY);bullseyeAnswer(c);adjustAndGoToNextProblem("bullseye")}else{displayAnswerBoardClose(answerY);closeEnoughAnswer(c);adjustAndGoToNextProblem("closeEnough")}clearScreenBottom(a);potentiallyDisplayMultiplicationMessage(d,2E3);computeBaseboardAnswer(currentProblem.decimalEquivalent,baseboardMin,baseboardMax);currentTry==1&&
changeGravity(getAdjustedGravity()+GRAVITY_CHANGE);currentTry=0;numBeginnerProblemsLeft--}else{currentTry++;currentTry>0&&addScaffolding();streakCounter=0;currentLevelType=="fraction"&&adjustProblemProbabilities("wrong");if(numBeginnerProblemsLeft>0&&currentTry>4)currentTry=4;playWrongAnswerSound(b-c);switch(currentTry){case 1:break;case 2:currentLevelType=="presidential"?showPresidentName(false):showArrowHint(a,b,c);break;case 3:clearArrowHint();if(currentLevelType=="multiplication")showArrowHint(a,
b,c);else if(currentLevelType=="presidential"){showPresidentName(true);showArrowHint(a,b,c)}else showDenominatorHint(c);break;case 4:clearArrowHint();showUpArrowHint(answerY);if(numBeginnerProblemsLeft>0||currentLevel==1)break;case 5:currentTry=1;clearArrowHint();displayAnswerBoardGameOver(answerY);potentiallyDisplayMultiplicationMessage(currentProblem,5E3);gameOver();displayScoreBoard();break;default:alert("Turn "+currentTry+".Please restart the game.\nYou have found 1/5 of the bugs in our game :P")}}}
function setObjectXY(a){var b,c;b=parseInt(a.css("top"));c=parseInt(a.css("height"));ballX=b+c;b=parseInt(a.css("left"));a=parseInt(a.css("width"));ballY=b+a/2}function computeBaseboardAnswer(a,b,c){answerY=(a-b)*((320-2*bboffset)/(c-b))+bboffset}function setLevelBackgroundImage(a){a="url('images/level"+a+"bg.png')";$("#level-screen").css("background-image",a)}
function setBaseboardLimits(a){$("#baseMin").text(baseboardMin);$("#baseMax").text(baseboardMax);$("#baseMin").css("color",bbcolors[a]).fadeIn("slow");$("#baseMax").css("color",bbcolors[a]).fadeIn("slow")}function computeBoardLocation(a,b,c){return a*(300/(c-b))+bboffset}function addScaffolding(){if(currentLevel<lowScaffold){showDenominatorHint(answerY);isScaffolded=true}}
function addBall(){$(".ballClass").css("background-image","url('images/fractionball.png')");ball=$("#ball");initializePositionForBall(ball);ballHeight=parseInt(ball.css("height"))}function initializePositionForBall(a){a.css("top",ballInitialTop);usingSimulator?a.css("left","145px"):a.css("left",ballInitialLeft);startWatchingForShaking();changeGravity(INIT_GRAVITY);setBallAtHeight(ballInitialTop,true);tempGravityChange(0.0070);restartGame()}
function initialGameMessages(){changeGameMessage("messageboard");setTimeout('changeGameMessage("messageboardwball");',2E3);setTimeout('changeGameMessage("");',4E3)}function changeGameMessage(a){a="url('images/"+a+".png')";$("#game-messageboard").css("background-image",a)}function showPresidentName(a){a=currentProblem.problemLabel+(a?" - "+currentProblem.numerator:"");$("#baseboard-message").text(a)}
function showArrowHint(a,b,c){if(b>c){var d=parseInt($("#blackarrowleft").css("margin-left"));a=parseInt($("#blackarrowleft").css("width"));b=d+(b-d)-a;if(b-a<c)b+=a;$("#blackarrowleft").css("margin-left",b);$("#blackarrowleft").css("visibility","visible");$("#blackarrowright").css("visibility","hidden")}else{d=parseInt($("#blackarrowright").css("margin-left"));a=parseInt($("#blackarrowright").css("width"));b=d+(b-d);if(b+a>c)b-=a;$("#blackarrowright").css("margin-left",b);$("#blackarrowright").css("visibility",
"visible");$("#blackarrowleft").css("visibility","hidden")}}function clearScreenBottom(a){clearAnswerBoard();clearArrowHint();clearUpArrowHint();clearPresidentName();clearDenominatorHint(a)}function clearPresidentName(){$("#baseboard-message").text("")}function clearArrowHint(){$("#blackarrowright").css("visibility","hidden");$("#blackarrowleft").css("visibility","hidden")}function showUpArrowHint(a){$("#uparrow").css("margin-left",a-10);$("#uparrow").css("visibility","visible")}
function clearUpArrowHint(){$("#uparrow").css("visibility","hidden")}
function showDenominatorHint(a){var b,c=0,d=currentProblem.denominator;a=currentProblem.numerator;if(!isScaffolded)if(d!=0)for(i=1;i/d<baseboardMax;){b=i/d;a=computeBoardLocation(b,baseboardMin,baseboardMax);$("#full-screen-area").append('<div id="hint-'+i+'" class="dHint"></div>');var f=$("#hint-"+i);f.css("margin-left",a);if(currentLevel<lowScaffold){c=getRandomInteger(0,1);if(a==answerY)c=0}if(currentLevel<highScaffold||c){$("#full-screen-area").append('<div id="hintnumer-'+i+'" class="numerHint">'+
i+"</div>");$("#full-screen-area").append('<div id="hintline-'+i+'" class="lineHint"> &#151; </div>');$("#full-screen-area").append('<div id="hintdenom-'+i+'" class="denomHint">'+d+"</div>");var g=$("#hintnumer-"+i),j=$("#hintline-"+i),h=$("#hintdenom-"+i);i>10?g.css("margin-left",a-10):g.css("margin-left",a-8);j.css("margin-left",a-8);d>10?h.css("margin-left",a-10):h.css("margin-left",a-8)}b==1&&f.css("background-color","#ff7200");i++}}
function clearDenominatorHint(a){if(a!=0){for(var b=1;b/a<baseboardMax;){$("#hint-"+b).remove();$("#hintnumer-"+b).remove();$("#hintline-"+b).remove();$("#hintdenom-"+b).remove();b++}isScaffolded=false}}function displayAnswerBoardClose(a){a=a-bboffset;$("#answerboard").css("background-color","#ff7200");$("#answerboard").css("width",a);$("#answerboard").fadeIn("fast")}
function displayAnswerBoardDeadOn(a){a=a-bboffset;if(a==0)a=2;$("#answerboard").css("background-color","red");$("#answerboard").css("width",a);$("#answerboard").fadeIn("fast")}function displayAnswerBoardGameOver(a){a=a-bboffset;if(a==0)a=2;$("#answerboard").css("background-color","#878185");$("#answerboard").css("width",a);$("#answerboard").fadeIn("fast")}function clearAnswerBoard(a){$("#answerboard").fadeOut("slow")}
function gameOver(){clearInterval(timerLoop);playSoundIfSoundIsOn(gameOverSound);$("#game-over").css("visibility","visible");$("#game-over").fadeIn("slow");gameIsOver=true}function goHome(){clearScreenBottom(currentProblem.denominator);$("#game-over").css("visibility","hidden");setTimeout("jQT.goTo('#home', 'cube');",100)}var firstTimeGame=true;
function restartGame(){$("#game-over").css("visibility","hidden");createFractionProblem2DArray();createMultiplicationProblem2DArray();createPresidentialProblemArray();if(firstTimeGame)firstTimeGame=false;else{clearScreenBottom(currentProblem.denominator);baseboardMax=currentLevel=1;baseboardMin=0;currentProblem=new ProblemObject(1,2);getNewProblem()}computeBaseboardAnswer(currentProblem.decimalEquivalent,baseboardMin,baseboardMax);displayCurrentProblem();addScaffolding();restartLevel(1)}
function restartLevel(a){clearUpArrowHint();if(a==undefined){a=currentLevel;$("#game-over").css("visibility","hidden")}setScore(0);setLevel(a);if(a<=5)numBeginnerProblemsLeft=numBeginnerProblems;timerLoop=setInterval("animationLoop()",50);gameIsOver=false}var _gravity,_ballBounceHeight=330,_yInitial=360;function changeGravity(a){_gravity=a/1E3;a=getGravityTime();_initialVelocity=-1*(_ballBounceHeight/a+_gravity*a/2)}function getGravityTime(){return Math.sqrt(2*_ballBounceHeight/_gravity)}
function getAdjustedGravity(){return _gravity*1E3}function changeGravityAtPoint(a){var b=(new Date).getTime(),c=(b-_oldTime)*Math.sqrt(getAdjustedGravity()/a);changeGravity(a);_oldTime=b-c}function tempGravityChange(a){var b=getAdjustedGravity();changeGravityAtPoint(a);setTimeout("resetGravity("+b+")",1E3)}function resetGravity(a){changeGravityAtPoint(parseFloat(a))}
function setBallAtHeight(a,b){if(b){a=a-(_yInitial-_ballBounceHeight);a=Math.sqrt(2*a/_gravity);a+=getGravityTime();a*=-1}else{a=_yInitial-a;a=(_initialVelocity+Math.sqrt(_initialVelocity*_initialVelocity-2*_gravity*a))/_gravity}_oldTime=(new Date).getTime()+a}var _newTime,_oldTime,starttest=true;function getTopForTime(){_newTime=(new Date).getTime();var a;if(_newTime<=_oldTime)a=_yInitial;else{a=_newTime-_oldTime;a=_yInitial+a*(_initialVelocity+_gravity*a/2)}return parseInt(a)}
function ProblemObject(a,b){this.problemType="fraction";this.numerator=a;this.denominator=b;this.decimalEquivalent=b==0?0:a/b;this.probability=0.5;this.problemLabel=""}
function initializeGameSounds(){wrongAnswerSounds[0]=new Media("www/sounds/wrongleft.wav");wrongAnswerSounds[1]=new Media("www/sounds/wrongright.wav");closeEnoughSounds[0]=new Media("www/sounds/laser.wav");closeEnoughSounds[1]=new Media("www/sounds/cashregister.wav");closeEnoughSounds[2]=new Media("www/sounds/ching.wav");closeEnoughSounds[3]=new Media("www/sounds/arrow.wav");bullseyeSounds[0]=new Media("www/sounds/explosion2.wav");bullseyeSounds[1]=new Media("www/sounds/perfect.wav");bullseyeSounds[2]=
new Media("www/sounds/precise.wav");bullseyeSounds[3]=new Media("www/sounds/yes.wav");bullseyeSounds[4]=new Media("www/sounds/onthedot.wav");bullseyeSounds[5]=new Media("www/sounds/immaculate.wav");bullseyeSounds[6]=new Media("www/sounds/onthemoney.wav");bullseyeSounds[7]=new Media("www/sounds/supreme.wav");bullseyeSounds[8]=new Media("www/sounds/ideal.wav");bullseyeSounds[9]=new Media("www/sounds/spotless.wav");bullseyeSounds[10]=new Media("www/sounds/sublime.wav");bullseyeSounds[11]=new Media("www/sounds/flawless.wav");
nextLevelSounds[0]=new Media("www/sounds/cheer.wav");presidentialLevelSound=new Media("www/sounds/hailtothechief.wav");multiplicationLevelSound=new Media("www/sounds/mollusk.wav");gameOverSound=new Media("www/sounds/gameoversound.wav")}function bullseyeAnswer(a){playBullseyeSound();adjustScore("bullseye");if(dunkWait){changeGameMessage("dddunk");setTimeout('changeGameMessage("");',1E3)}}
function closeEnoughAnswer(){playCloseEnoughSound();adjustScore("closeEnough");if(dunkWait){changeGameMessage("dddunk");setTimeout('changeGameMessage("");',1E3)}}function adjustAndGoToNextProblem(a){currentLevelType=="fraction"&&adjustProblemProbabilities(a);nextProblem()}
function playBullseyeSound(){var a=getRandomInteger(1,Math.min(bullseyeSounds.length-1,currentLevel-1));playSoundIfSoundIsOn(bullseyeSounds[0]);playSoundIfSoundIsOn(bullseyeSounds[a]);navigator.notification.vibrate(vibrateTime)}function playWrongAnswerSound(a){a>0?playSoundIfSoundIsOn(wrongAnswerSounds[1]):playSoundIfSoundIsOn(wrongAnswerSounds[0])}
function playCloseEnoughSound(){var a=getRandomInteger(0,Math.min(closeEnoughSounds.length-1,currentLevel-1));playSoundIfSoundIsOn(closeEnoughSounds[a])}function playNextLevelSound(){var a=getRandomInteger(0,nextLevelSounds.length-1);playSoundIfSoundIsOn(nextLevelSounds[a])}function playSoundIfSoundIsOn(a){isSoundOn&&a.play()}
function adjustScore(a){var b=0;if(!(currentTry>2))if(currentTry==1)switch(a){case "bullseye":if(dunkWait)b=10;increaseScore(20+b);break;case "closeEnough":if(dunkWait)b=5;increaseScore(15+b);break}else if(currentTry==2)switch(a){case "bullseye":if(dunkWait)b=10;increaseScore(15+b);break;case "closeEnough":if(dunkWait)b=5;increaseScore(10+b);break}}function increaseScore(a){setScore(playerScore+a)}function setScore(a){playerScore=a;a=playerScore+" pts";$("#score").text(a)}
function bonusGraphic(){}function nextLevel(){var a=currentLevel+1;if(secretWaiting){a=currentLevelType=="multiplication"?20:9;secretWaiting=false}if(!(a>20||20>a&&a>9)){changeGravity(INIT_GRAVITY);setLevel(a);playNextLevelSound()}}
function setLevel(a){currentLevel=a;$("#level").text(currentLevel);problemsFinishedThisLevel=streakCounter=0;if(currentLevel==1){$("#baseMax").css("margin-left","303px");$("#multiplication-problem").text("");changeLevelType("fraction");baseboardMax=1;setBaseboardLimits(0)}else if(currentLevel==5){baseboardMax=2;setBaseboardLimits(1)}else if(currentLevel==9){$("#numerator").text("");$("#denominator").text("");$("#baseMax").css("margin-left","265px");changeLevelType("multiplication");baseboardMax=highestMultiplier*
highestMultiplier;setBaseboardLimits(2)}else if(currentLevel==20){$("#game-messageboard").css("top","80px");$("#baseMax").css("margin-left","275px");$("#baseMax").css("font-size","15pt");$("#baseMin").css("font-size","15pt");changeLevelType("presidential");baseboardMax=2010;baseboardMin=1910;setBaseboardLimits(3)}setLevelBackgroundImage(currentLevel);a=3E3;if(currentLevel==20)a=7E3;if(currentLevel==5||currentLevel==9)a=5E3;if(currentLevel!=1){changeGameMessage("messagelevel"+currentLevel);setTimeout('changeGameMessage("");',
a)}}function changeLevelType(a){currentLevelType=a;switch(a){case "multiplication":a="url('images/plainball.png')";$(".ballClass").css("background-image",a);break;case "presidential":$("#multiplication-problem").text("");break;case "sqroot":a="url('images/sqrootball.png')";$(".ballClass").css("background-image",a);break;case "fraction":}}
function createFractionProblem2DArray(){for(var a=1;a<=highestDenominator[highestLevel];a++){fractionProblems[a]=[];for(var b=0;b<=a*baseboardMaxPotential;b++){fractionProblems[a][b]=new ProblemObject(b,a);fractionProblems[a][b].probability=b==0?0.3:b==a?0.3:b==1?0.6:0.5}}}
function createMultiplicationProblem2DArray(){for(var a=0;a<=highestMultiplier;a++){multiplicationProblems[a]=[];for(var b=0;b<=highestMultiplier;b++){multiplicationProblems[a][b]=new ProblemObject(a,b);multiplicationProblems[a][b].problemType="multiplication";multiplicationProblems[a][b].decimalEquivalent=a*b;multiplicationProblems[a][b].probability=0.5}}}
function createPresidentialProblemArray(){for(i=0;i<presidentialNames.length;i++){presidentialProblems[i]=new ProblemObject(presidentialYearsElected[i],1);presidentialProblems[i].problemLabel=presidentialNames[i];presidentialProblems[i].problemType="presidential"}}
function nextProblem(){streakCounter++;currentTry=1;if(streakCounter>=skunk){increaseScore(50);bonusGraphic();nextLevel()}else if(++problemsFinishedThisLevel>=numProblemsPerLevel||secretWaiting)nextLevel();getNewProblem();displayCurrentProblem()}
function adjustProblemProbabilities(a){var b,c;switch(a){case "bullseye":b=0.5;c=0.8;break;case "closeEnough":b=0.75;c=0.9;break;case "wrong":b=1.6;c=1.3;break}a=currentProblem.probability;a=a*b;currentProblem.probability=Math.min(1,a);b=currentProblem.denominator;for(var d=0;d<=currentProblem.denominator;d++){a=fractionProblems[b][d].probability;a=a*c;if(d!=currentProblem.numerator)fractionProblems[b][d].probability=Math.min(1,a)}}
function getNewProblem(){switch(currentLevelType){case "fraction":var a=currentProblem.numerator,b=currentProblem.denominator;do var c=Math.random(),d=getRandomInteger(2,highestDenominator[currentLevel]),f=getRandomInteger(0,d*baseboardMax);while(c>fractionProblems[d][f].probability||d==b&&f==a);currentProblem=fractionProblems[d][f];break;case "multiplication":do{c=Math.random();a=getRandomInteger(0,highestMultiplier);b=getRandomInteger(0,highestMultiplier)}while(c>multiplicationProblems[a][b].probability);
currentProblem=multiplicationProblems[a][b];break;case "presidential":do c=presidentialProblems[getRandomInteger(0,presidentialProblems.length-1)];while(c==currentProblem);currentProblem=c;c="url('images/"+currentProblem.problemLabel+".png')";$(".ballClass").css("background-image",c);break}}
function displayCurrentProblem(){switch(currentProblem.problemType){case "fraction":$("#numerator").text(currentProblem.numerator);$("#denominator").text(currentProblem.denominator);break;case "multiplication":var a=currentProblem.numerator+"x"+currentProblem.denominator;$("#multiplication-problem").text(a);break;case "integer":break;case "presidential":break}}function getRandomInteger(a,b){return Math.floor(Math.random()*(b-a+1)+a)}
function secretClick(){if(!gameIsOver){currentLevelType=="multiplication"?playSoundIfSoundIsOn(presidentialLevelSound):playSoundIfSoundIsOn(multiplicationLevelSound);secretWaiting=true}}function sendMail(){document.location.href="mailto:doubledribblegame@gmail.com?subject=Contact Us &body="}
function displayScoreBoard(){$("#mask").click(maskClicked);$(".window .close").click(closeClicked);localStorage.getItem("nscores")||localStorage.setItem("nscores",0);var a=localStorage.getItem("nscores");if(a<6){a++;var b="scores"+a}else b="scores1";localStorage.setItem(b,playerScore);for(b=a-1;b>=1;b--)for(var c=1;c<=b;c++){var d="scores"+(c+1),f="scores"+c;score1=localStorage.getItem(d);score2=localStorage.getItem(f);if(score1<score2){localStorage.setItem(d,score2);localStorage.setItem(f,score1)}}localStorage.setItem("nscores",
a);displayModalWindow()}
function displayModalWindow(){var a=$("#boxes");$("#mask").css({width:250,height:300});$("#mask").fadeIn(1E3);$("#mask").fadeTo("slow",0.8);$(a).fadeIn(2E3);$("#mask").append('<div id="highscores" class="scoretext">High Scores</div><br/><br/>');a=localStorage.getItem("nscores");if(a<=5)for(i=a;i>=1;i--)$("#mask").append('<div id="scores'+i+'" class="scoretext">'+localStorage.getItem("scores"+i)+"</div>");else for(i=a;i>1;i--)$("#mask").append('<div id="scores'+i+'" class="scoretext">'+localStorage.getItem("scores"+
i)+"</div>")}function closeClicked(a){e.preventDefault();$("#mask, .window").hide()}function maskClicked(a){$(this).hide();$(".window").hide()}function potentiallyDisplayMultiplicationMessage(a,b){if(a.problemType=="multiplication"){a=a.numerator+" x "+a.denominator+" = "+parseInt(a.decimalEquivalent);$("#baseboard-message").text(a);setTimeout("$('#baseboard-message').text('');",b)}};